***
***  Welcome to a Darwin docker build  20200102_16_56 
***
***  bfg.bash    
***  /Users/boscp08/Projects/scratch/virtual-insanity/waardepapieren  
***  to build new waardepapieren images and containers 
***  FQDN = https://discipl.westeurope.azurecontainer.io 
***  docker-tag = 4
***  AZURE ACI-resourcegroup=Discipl_Wigo4it_DockerGroup4
***  LOGFILE=/Users/boscp08/Projects/scratch/virtual-insanity/waardepapieren/LOG_DIR/LOG_20200102_16_56.log
<code>
#######################
## variables
#######################
LOG_DIR=/Users/boscp08/Projects/scratch/virtual-insanity/waardepapieren/LOG_DIR
GIT_USER=boschpeter
GIT_REPO=waardepapieren
GITHUB_DIR=/Users/boscp08/Projects/scratch/virtual-insanity/waardepapieren
DOCKER_USER=boscp08
COMPOSE_BUILD_FLAG= --build
waardepapieren_mock-nlx=waardepapieren_mock-nlx
waardepapieren_waardepapieren-service=waardepapieren_waardepapieren-service
waardepapieren_clerk-frontend=waardepapieren_clerk-frontend
waardepapieren_mock-nlx=waardepapieren_mock-nlx
waardepapieren_waardepapieren-service=waardepapieren_waardepapieren-service
waardepapieren_clerk-frontend=waardepapieren_clerk-frontend
DOCKER_VERSION_TAG=4
AZ_RESOURCE_GROUP=Discipl_Wigo4it_DockerGroup4
AZ_DNSNAMELABEL=discipl
TIMEZONE=
CERT_HOST_IP=discipl.westeurope.azurecontainer.io
CERT_HOST_IP_WP_SERVICE_HOSTNAME=discipl.westeurope.azurecontainer.io
#######################
## variables
#######################
</code>
| 20200102_16_56 | Dockerfile|
| 20200102_16_56 | /Users/boscp08/Projects/scratch/virtual-insanity/waardepapieren/mock-nlx |
<code>
FROM node:10
RUN mkdir /app
ADD index.js package.json package-lock.json /app/
WORKDIR /app





RUN npm install --production
</code>
20200102_16_56 - END JOB :
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
| 20200102_16_56 | docker-compose-travis.yml|
| 20200102_16_56 | /Users/boscp08/Projects/scratch/virtual-insanity/waardepapieren |
<code>
</code>
20200102_16_56 - END JOB :
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
| 20200102_16_56 | Dockerfile|
| 20200102_16_56 | /Users/boscp08/Projects/scratch/virtual-insanity/waardepapieren/clerk-frontend |
<code>
FROM node:10
RUN mkdir /app
ADD package.json package-lock.json /app/
ENV REACT_APP_EPHEMERAL_ENDPOINT=https://discipl.westeurope.azurecontainer.io:443/api/eph
ENV REACT_APP_EPHEMERAL_WEBSOCKET_ENDPOINT=wss://discipl.westeurope.azurecontainer.io:443/api/eph-ws
WORKDIR /app
RUN npm install --unsafe-perm
ADD public /app/public
ADD src /app/src
ARG CERTIFICATE_HOST
ENV REACT_APP_CERTIFICATE_HOST=http://discipl.westeurope.azurecontainer.io:8880





RUN npm run build

FROM nginx:1.15.8
ADD nginx/nginx.conf /etc/nginx/nginx.conf
COPY --from=0 /app/build /usr/share/nginx/html
#  volumes:
#    - ./clerk-frontend/nginx/certs:/etc/nginx/certs:rw
RUN mkdir /etc/nginx/certs
RUN apt-get update 
RUN apt-get install -y iputils-ping
RUN apt-get install -y net-tools

ADD nginx/certs/org.crt /etc/nginx/certs/org.crt
ADD nginx/certs/org.key /etc/nginx/certs/org.key
</code>
20200102_16_56 - END JOB :
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
| 20200102_16_56 | Dockerfile|
| 20200102_16_56 | /Users/boscp08/Projects/scratch/virtual-insanity/waardepapieren/waardepapieren-service |
<code>
FROM node:10
RUN mkdir /app
ADD .babelrc package.json package-lock.json /app/
ADD src/* app/src/
ADD configuration/* app/configuration/
#- ./waardepapieren-service/system-test/certs:/certs:ro
RUN mkdir /certs
ADD system-test/certs/org.crt /certs/org.crt
ADD system-test/certs/org.key /certs/org.key
#- ./waardepapieren-service/system-test/ephemeral-certs:/ephemeral-certs:ro
RUN mkdir /ephemeral-certs
ADD system-test/ephemeral-certs/org.crt /ephemeral-certs/
ADD system-test/ephemeral-certs/org.key /ephemeral-certs/
#- ./waardepapieren-service/configuration/:/app/configuration:ro

WORKDIR /app
RUN mkdir /configuration
ADD configuration/waardepapieren-config-compose.json /app/configuration
ADD configuration/waardepapieren-config-compose-travis.json /app/configuration
ADD configuration/waardepapieren-config.json /app/configuration
ENV WAARDEPAPIEREN_CONFIG /app/configuration/waardepapieren-config.json






RUN npm install --production
CMD npm start
</code>
20200102_16_56 - END JOB :
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
| 20200102_16_56 | docker-compose-travis.yml|
| 20200102_16_56 | /Users/boscp08/Projects/scratch/virtual-insanity/waardepapieren |
<code>
</code>
20200102_16_56 - END JOB :
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
| 20200102_16_56 | Dockerfile|
| 20200102_16_56 | /Users/boscp08/Projects/scratch/virtual-insanity/waardepapieren/clerk-frontend |
<code>
FROM node:10
RUN mkdir /app
ADD package.json package-lock.json /app/
ENV REACT_APP_EPHEMERAL_ENDPOINT=https://discipl.westeurope.azurecontainer.io:443/api/eph
ENV REACT_APP_EPHEMERAL_WEBSOCKET_ENDPOINT=wss://discipl.westeurope.azurecontainer.io:443/api/eph-ws
WORKDIR /app
RUN npm install --unsafe-perm
ADD public /app/public
ADD src /app/src
ARG CERTIFICATE_HOST
ENV REACT_APP_CERTIFICATE_HOST=






RUN npm run build

FROM nginx:1.15.8
ADD nginx/nginx.conf /etc/nginx/nginx.conf
COPY --from=0 /app/build /usr/share/nginx/html
</code>
20200102_16_56 - END JOB :
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
