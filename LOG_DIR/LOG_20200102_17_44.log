***
***  Welcome to a Darwin docker build  20200102_17_44 
***
***  bfg.bash    
***  /Users/boscp08/Projects/scratch/virtual-insanity/waardepapieren  
***  to build new waardepapieren images and containers 
***  FQDN = https://discipl.westeurope.azurecontainer.io 
***  docker-tag = 4
***  AZURE ACI-resourcegroup=Discipl_Wigo4it_DockerGroup4
***  LOGFILE=/Users/boscp08/Projects/scratch/virtual-insanity/waardepapieren/LOG_DIR/LOG_20200102_17_44.log
<code>
#######################
## variables
#######################
LOG_DIR=/Users/boscp08/Projects/scratch/virtual-insanity/waardepapieren/LOG_DIR
GIT_USER=boschpeter
GIT_REPO=waardepapieren
GITHUB_DIR=/Users/boscp08/Projects/scratch/virtual-insanity/waardepapieren
DOCKER_USER=boscp08
COMPOSE_BUILD_FLAG= --build
waardepapieren_mock-nlx=waardepapieren_mock-nlx
waardepapieren_waardepapieren-service=waardepapieren_waardepapieren-service
waardepapieren_clerk-frontend=waardepapieren_clerk-frontend
waardepapieren_mock-nlx=waardepapieren_mock-nlx
waardepapieren_waardepapieren-service=waardepapieren_waardepapieren-service
waardepapieren_clerk-frontend=waardepapieren_clerk-frontend
DOCKER_VERSION_TAG=4
AZ_RESOURCE_GROUP=Discipl_Wigo4it_DockerGroup4
AZ_DNSNAMELABEL=discipl
TIMEZONE=
CERT_HOST_IP=discipl.westeurope.azurecontainer.io
CERT_HOST_IP_WP_SERVICE_HOSTNAME=discipl.westeurope.azurecontainer.io
#######################
## variables
#######################
</code>
| 20200102_17_44 | nginx conf|
| 20200102_17_44 | /Users/boscp08/Projects/scratch/virtual-insanity/waardepapieren/clerk-frontend/nginx |
<code>
events {
    worker_connections  1024;
}

http {

    map $http_upgrade $connection_upgrade {
        default upgrade;
        '' close;
    }

    # Http server to obtain NLX certificate
    server {
        listen 8880;

        location / {
           root /usr/share/nginx/html;
           include /etc/nginx/mime.types;
        }
    }

    server {
        listen 443 ssl;

        ssl_certificate /etc/nginx/certs/org.crt;
        ssl_certificate_key /etc/nginx/certs/org.key;

        location /api/eph/ {
               proxy_pass https://discipl.westeurope.azurecontainer.io:3232/;    #pdf effect
           #     proxy_pass https://waardepapieren-service:3232/;
            #     proxy_pass https://172.19.0.3:3232/;
        }

        location /api/eph-ws {
           
              proxy_pass https://discipl.westeurope.azurecontainer.io:3232;   # pdf effect
             #  proxy_pass https://waardepapieren-service:3232;
            #  proxy_pass https://172.19.0.3:3232;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection Upgrade;
        }
        location / {
            root /usr/share/nginx/html;
            include /etc/nginx/mime.types;
        }
    }
}
</code>
20200102_17_44 - END JOB :
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
